<div class="toolbar-container">
    <!-- Mode Selector -->
    <section class="toolbar-section">
        <h3 class="section-title">TOOLS</h3>
        <div class="mode-grid">
            <button class="brutal-btn tool-btn" [style.background]="mode() === 'select' ? 'var(--lime)' : 'white'"
                (click)="setMode('select')">üñ±Ô∏è Select</button>
            <button class="brutal-btn tool-btn" [style.background]="mode() === 'connect' ? 'var(--blue)' : 'white'"
                [style.color]="mode() === 'connect' ? 'white' : 'black'" (click)="setMode('connect')">üîó Link</button>
            <button class="brutal-btn tool-btn" [style.background]="mode() === 'hypothesis' ? 'var(--yellow)' : 'white'"
                (click)="setMode('hypothesis')">üí° Hypo</button>
            <button class="brutal-btn tool-btn" [style.background]="mode() === 'pan' ? 'var(--lavender)' : 'white'"
                (click)="setMode('pan')">ü§ö Pan</button>
            <button class="brutal-btn tool-btn" [style.background]="mode() === 'delete' ? 'var(--pink)' : 'white'"
                (click)="setMode('delete')">üóëÔ∏è Delete</button>
        </div>
    </section>

    <!-- View Controls -->
    <section class="toolbar-section">
        <h3 class="section-title">VIEW</h3>
        <div class="control-row">
            <span class="control-label">Zoom: {{ (viewport().zoom * 100) | number:'1.0-0' }}%</span>
            <div class="zoom-buttons">
                <button class="brutal-btn mini-btn" (click)="zoom(-0.1)">‚àí</button>
                <button class="brutal-btn mini-btn" (click)="resetViewport()">‚ü≥</button>
                <button class="brutal-btn mini-btn" (click)="zoom(0.1)">+</button>
            </div>
        </div>

        <div class="control-row">
            <span class="control-label">Grid</span>
            <input type="checkbox" [checked]="tools().isGridVisible" (change)="toggleGrid()"
                style="width: 20px; height: 20px;">
        </div>

        <div *ngIf="tools().isGridVisible" class="sub-controls">
            <div class="control-row">
                <span class="control-label" style="font-size: 0.75rem;">Snap</span>
                <input type="checkbox" [checked]="tools().isSnapToGrid" (change)="toggleSnapToGrid()"
                    style="width: 16px; height: 16px;">
            </div>
            <div class="slider-control">
                <span class="control-label" style="font-size: 0.75rem;">Size: {{ tools().gridSize }}px</span>
                <input type="range" min="10" max="50" step="5" [value]="tools().gridSize"
                    (input)="updateGridSize($event)" class="time-slider">
            </div>
        </div>
    </section>

    <!-- Connection Style -->
    <section class="toolbar-section">
        <h3 class="section-title">CONNECTIONS</h3>
        <div class="control-row">
            <span class="control-label">Style</span>
            <select [value]="tools().connectionStyle" (change)="updateConnectionStyle($event)">
                <option value="straight">Straight</option>
                <option value="bezier">Curved</option>
                <option value="orthogonal">Orthogonal</option>
            </select>
        </div>
        <div class="control-row">
            <span class="control-label">Labels</span>
            <input type="checkbox" [checked]="tools().showLabels" (change)="toggleLabels()"
                style="width: 20px; height: 20px;">
        </div>
    </section>

    <!-- Actions -->
    <section class="toolbar-section">
        <h3 class="section-title">ACTIONS</h3>
        <div class="action-buttons">
            <button class="brutal-btn action-btn" style="background: var(--lime); width: 100%;" [disabled]="!canSave()"
                (click)="saveLayout()">üíæ Save</button>
            <div class="button-row">
                <button class="brutal-btn mini-btn" [disabled]="!canUndo()" (click)="undo()">‚Ü∂ Undo</button>
                <button class="brutal-btn mini-btn" [disabled]="!canRedo()" (click)="redo()">‚Ü∑ Redo</button>
            </div>
            <button class="brutal-btn action-btn" style="background: var(--orange); width: 100%;"
                (click)="autoArrange()">üßπ Tidy Desk</button>
        </div>
    </section>

    <!-- Stats -->
    <section class="toolbar-section">
        <h3 class="section-title">STATS</h3>
        <div class="stats-grid-compact">
            <div class="stat-row">
                <span>Nodes</span>
                <strong>{{ nodes().length }}</strong>
            </div>
            <div class="stat-row">
                <span>Links</span>
                <strong>{{ connections().length }}</strong>
            </div>
            <div class="stat-row">
                <span>Selected</span>
                <strong>{{ selectedNode() ? '1' : '‚Äî' }}</strong>
            </div>
            <div class="stat-row">
                <span>Mode</span>
                <strong>{{ mode() | titlecase }}</strong>
            </div>
        </div>
    </section>
</div>